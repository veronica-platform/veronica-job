!function(e){function t(e){return'"'+e.replace('"','""')+'"'}function n(e,t){var n=document.createElement("a");n.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}function o(n){var o="",l=n.find("tr").not(d.excludeRows),a=l.first().find("td,th").filter(":visible").not(d.excludeColumns).length;return console.log(a),l.each(function(){e(this).find("td,th").filter(":visible").not(d.excludeColumns).each(function(n,l){l=e(l),o+=d.quoteFields?t(l.text()):l.text(),console.log(n),o+=n!=a-1?d.separator:d.newline})}),o}var d={filename:"table.csv",appendTo:"body",separator:",",newline:"\n",quoteFields:!0,excludeColumns:"",excludeRows:""};e.fn.table2csv=function(t,l){"object"==typeof t?(l=t,t="download"):void 0===t&&(t="download"),e.extend(d,l);var a=this;switch(t){case"download":var i=o(a);n(d.filename,i);break;case"output":var i=o(a);e(d.appendTo).append(e("<pre>").text(i))}return this}}(jQuery);